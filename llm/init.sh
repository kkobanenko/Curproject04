#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ Llama 8B
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

set -e

echo "üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Ollama..."

# –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ Ollama —Å–µ—Ä–≤–∏—Å–∞
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ Ollama —Å–µ—Ä–≤–∏—Å–∞..."
until curl -s http://localhost:11434/api/tags > /dev/null 2>&1; do
    echo "   Ollama –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤, –∂–¥–µ–º..."
    sleep 2
done

echo "‚úÖ Ollama —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –º–æ–¥–µ–ª—å llama3:8b
if ollama list | grep -q "llama3:8b"; then
    echo "‚úÖ –ú–æ–¥–µ–ª—å llama3:8b —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
else
    echo "üì• –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ llama3:8b..."
    ollama pull llama3:8b
    echo "‚úÖ –ú–æ–¥–µ–ª—å llama3:8b –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
fi

echo "üéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
